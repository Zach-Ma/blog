---
title: "基于Go实现短链接服务"
date: 2021-09-28T16:56:50+08:00
draft: false
---

## 关于短链接服务

短链接地址的优点：

- 精简（如：转译成二维码后识别度相对更高）
- 安全（不易暴露参数）

### 实现原理

请求先访问短链接服务器，经该服务器索引找到原始地址后通过重定向(302)到原始链接地址

### 短链接生成的方式

#### 哈希

#### 发号器

- 数据库自增主键
- Redis
- Snowflake 算法
- uuid全局标识

## 基于Go实现的简单短链接服务

[link](https://github.com/Zchary-Ma/project52-url-shortner)

## 补充

> 关于HTTP状态码301和302

- 301，StatusMovedPermanently 代表永久重定向。也就是说，浏览器第一次请求拿到重定向地址后，以后的请求，都是直接从浏览器缓存中获取重定向地址，不会再请求短链服务。这样可以有效减少服务请求数，降低服务器负载，但是因为后续浏览器不再向后端发送请求，因此获取不到真实的点击数。

- 302，StatusFound 代表临时重定向。也就是说，每次浏览器都会向服务器发起请求获取新的地址，虽然会给服务器增加压力，但在硬件过剩的今天，这点压力比起数据简直不值一提。所以，302 重定向才是短链服务的首选

注：3xx重定向请求都源于GET请求 

> 关于哈希算法设计
> 如何统计QPS
> 如何抗住大流量和大QPS

## Referrence

- [系统设计系列之如何设计一个短链服务](https://xie.infoq.cn/article/483fcfbe3f942cb1fa9d9ce20)
- [短网址(short URL)系统的原理及其实现](https://hufangyun.com/2017/short-url/)